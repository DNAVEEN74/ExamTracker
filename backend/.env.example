# ExamTracker Backend — Environment Variables Reference
# Copy this file to .env and fill in your actual values.
# NEVER commit .env to git — it is gitignored.

# ── Server ────────────────────────────────────────────────────────────────────
PORT=8000
NODE_ENV=development

# ── Supabase (Service Role — server-side only, NEVER expose to client) ────────
# Get from: https://supabase.com/dashboard → Project Settings → API
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# ── Upstash Redis (Rate Limiting — sliding window) ────────────────────────────
# Get from: https://console.upstash.com → Create Database → REST API tab
# Optional: if not set, rate limiting is skipped (all requests pass through)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ── Razorpay ──────────────────────────────────────────────────────────────────
# Get from: https://dashboard.razorpay.com → Settings → API Keys
# Optional: if not set, /subscriptions/create-order throws a descriptive error
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=
RAZORPAY_WEBHOOK_SECRET=

# ── Resend (Transactional Email) ──────────────────────────────────────────────
# Get from: https://resend.com/api-keys
# Optional: if not set, emails are logged to console (dev mode)
RESEND_API_KEY=
RESEND_FROM_ALERTS=ExamTracker <alerts@examtracker.in>
RESEND_FROM_AUTH=ExamTracker <noreply@examtracker.in>

# ── MSG91 (SMS OTP via Supabase phone auth hook) ─────────────────────────────
# Get from: https://msg91.com → API → Keys
# Optional: Supabase handles SMS — these are for custom SMS hook if needed
MSG91_API_KEY=
MSG91_TEMPLATE_ID=
MSG91_SENDER_ID=EXMTRK

# ── Internal Secrets ──────────────────────────────────────────────────────────
# Generate with: openssl rand -hex 32

# For scraper → parse-queue webhook (POST /api/v1/webhooks/parse-queue)
INTERNAL_API_SECRET=

# For Supabase DB Webhook → process-notifications
# Set this as the header value in: Supabase Dashboard → Database → Webhooks
# Header key: x-webhook-secret
SUPABASE_WEBHOOK_SECRET=

# ── Frontend (CORS) ───────────────────────────────────────────────────────────
FRONTEND_URL=http://localhost:3000
